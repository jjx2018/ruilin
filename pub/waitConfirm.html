<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        .loading {
            position: absolute;
            /* top:50%;
        left:50%;  */
            width: 220px;
            height: 56px;
            line-height: 56px;
            color: #fff;
            padding-left: 60px;
            font-size: 15px;
            background: #000 url(data:image/gif;base64,R0lGODlhIAAgAPMAAAAAAP///zg4OHp6ekhISGRkZMjIyKioqCYmJhoaGkJCQuDg4Pr6+gAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAIAAgAAAE5xDISWlhperN52JLhSSdRgwVo1ICQZRUsiwHpTJT4iowNS8vyW2icCF6k8HMMBkCEDskxTBDAZwuAkkqIfxIQyhBQBFvAQSDITM5VDW6XNE4KagNh6Bgwe60smQUB3d4Rz1ZBApnFASDd0hihh12BkE9kjAJVlycXIg7CQIFA6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YJvpJivxNaGmLHT0VnOgSYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ/V/nmOM82XiHRLYKhKP1oZmADdEAAAh+QQJCgAAACwAAAAAIAAgAAAE6hDISWlZpOrNp1lGNRSdRpDUolIGw5RUYhhHukqFu8DsrEyqnWThGvAmhVlteBvojpTDDBUEIFwMFBRAmBkSgOrBFZogCASwBDEY/CZSg7GSE0gSCjQBMVG023xWBhklAnoEdhQEfyNqMIcKjhRsjEdnezB+A4k8gTwJhFuiW4dokXiloUepBAp5qaKpp6+Ho7aWW54wl7obvEe0kRuoplCGepwSx2jJvqHEmGt6whJpGpfJCHmOoNHKaHx61WiSR92E4lbFoq+B6QDtuetcaBPnW6+O7wDHpIiK9SaVK5GgV543tzjgGcghAgAh+QQJCgAAACwAAAAAIAAgAAAE7hDISSkxpOrN5zFHNWRdhSiVoVLHspRUMoyUakyEe8PTPCATW9A14E0UvuAKMNAZKYUZCiBMuBakSQKG8G2FzUWox2AUtAQFcBKlVQoLgQReZhQlCIJesQXI5B0CBnUMOxMCenoCfTCEWBsJColTMANldx15BGs8B5wlCZ9Po6OJkwmRpnqkqnuSrayqfKmqpLajoiW5HJq7FL1Gr2mMMcKUMIiJgIemy7xZtJsTmsM4xHiKv5KMCXqfyUCJEonXPN2rAOIAmsfB3uPoAK++G+w48edZPK+M6hLJpQg484enXIdQFSS1u6UhksENEQAAIfkECQoAAAAsAAAAACAAIAAABOcQyEmpGKLqzWcZRVUQnZYg1aBSh2GUVEIQ2aQOE+G+cD4ntpWkZQj1JIiZIogDFFyHI0UxQwFugMSOFIPJftfVAEoZLBbcLEFhlQiqGp1Vd140AUklUN3eCA51C1EWMzMCezCBBmkxVIVHBWd3HHl9JQOIJSdSnJ0TDKChCwUJjoWMPaGqDKannasMo6WnM562R5YluZRwur0wpgqZE7NKUm+FNRPIhjBJxKZteWuIBMN4zRMIVIhffcgojwCF117i4nlLnY5ztRLsnOk+aV+oJY7V7m76PdkS4trKcdg0Zc0tTcKkRAAAIfkECQoAAAAsAAAAACAAIAAABO4QyEkpKqjqzScpRaVkXZWQEximw1BSCUEIlDohrft6cpKCk5xid5MNJTaAIkekKGQkWyKHkvhKsR7ARmitkAYDYRIbUQRQjWBwJRzChi9CRlBcY1UN4g0/VNB0AlcvcAYHRyZPdEQFYV8ccwR5HWxEJ02YmRMLnJ1xCYp0Y5idpQuhopmmC2KgojKasUQDk5BNAwwMOh2RtRq5uQuPZKGIJQIGwAwGf6I0JXMpC8C7kXWDBINFMxS4DKMAWVWAGYsAdNqW5uaRxkSKJOZKaU3tPOBZ4DuK2LATgJhkPJMgTwKCdFjyPHEnKxFCDhEAACH5BAkKAAAALAAAAAAgACAAAATzEMhJaVKp6s2nIkolIJ2WkBShpkVRWqqQrhLSEu9MZJKK9y1ZrqYK9WiClmvoUaF8gIQSNeF1Er4MNFn4SRSDARWroAIETg1iVwuHjYB1kYc1mwruwXKC9gmsJXliGxc+XiUCby9ydh1sOSdMkpMTBpaXBzsfhoc5l58Gm5yToAaZhaOUqjkDgCWNHAULCwOLaTmzswadEqggQwgHuQsHIoZCHQMMQgQGubVEcxOPFAcMDAYUA85eWARmfSRQCdcMe0zeP1AAygwLlJtPNAAL19DARdPzBOWSm1brJBi45soRAWQAAkrQIykShQ9wVhHCwCQCACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiRMDjI0Fd30/iI2UA5GSS5UDj2l6NoqgOgN4gksEBgYFf0FDqKgHnyZ9OX8HrgYHdHpcHQULXAS2qKpENRg7eAMLC7kTBaixUYFkKAzWAAnLC7FLVxLWDBLKCwaKTULgEwbLA4hJtOkSBNqITT3xEgfLpBtzE/jiuL04RGEBgwWhShRgQExHBAAh+QQJCgAAACwAAAAAIAAgAAAE7xDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfZiCqGk5dTESJeaOAlClzsJsqwiJwiqnFrb2nS9kmIcgEsjQydLiIlHehhpejaIjzh9eomSjZR+ipslWIRLAgMDOR2DOqKogTB9pCUJBagDBXR6XB0EBkIIsaRsGGMMAxoDBgYHTKJiUYEGDAzHC9EACcUGkIgFzgwZ0QsSBcXHiQvOwgDdEwfFs0sDzt4S6BK4xYjkDOzn0unFeBzOBijIm1Dgmg5YFQwsCMjp1oJ8LyIAACH5BAkKAAAALAAAAAAgACAAAATwEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GGl6NoiPOH16iZKNlH6KmyWFOggHhEEvAwwMA0N9GBsEC6amhnVcEwavDAazGwIDaH1ipaYLBUTCGgQDA8NdHz0FpqgTBwsLqAbWAAnIA4FWKdMLGdYGEgraigbT0OITBcg5QwPT4xLrROZL6AuQAPUS7bxLpoWidY0JtxLHKhwwMJBTHgPKdEQAACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GAULDJCRiXo1CpGXDJOUjY+Yip9DhToJA4RBLwMLCwVDfRgbBAaqqoZ1XBMHswsHtxtFaH1iqaoGNgAIxRpbFAgfPQSqpbgGBqUD1wBXeCYp1AYZ19JJOYgH1KwA4UBvQwXUBxPqVD9L3sbp2BNk2xvvFPJd+MFCN6HAAIKgNggY0KtEBAAh+QQJCgAAACwAAAAAIAAgAAAE6BDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfYIDMaAFdTESJeaEDAIMxYFqrOUaNW4E4ObYcCXaiBVEgULe0NJaxxtYksjh2NLkZISgDgJhHthkpU4mW6blRiYmZOlh4JWkDqILwUGBnE6TYEbCgevr0N1gH4At7gHiRpFaLNrrq8HNgAJA70AWxQIH1+vsYMDAzZQPC9VCNkDWUhGkuE5PxJNwiUK4UfLzOlD4WvzAHaoG9nxPi5d+jYUqfAhhykOFwJWiAAAIfkECQoAAAAsAAAAACAAIAAABPAQyElpUqnqzaciSoVkXVUMFaFSwlpOCcMYlErAavhOMnNLNo8KsZsMZItJEIDIFSkLGQoQTNhIsFehRww2CQLKF0tYGKYSg+ygsZIuNqJksKgbfgIGepNo2cIUB3V1B3IvNiBYNQaDSTtfhhx0CwVPI0UJe0+bm4g5VgcGoqOcnjmjqDSdnhgEoamcsZuXO1aWQy8KAwOAuTYYGwi7w5h+Kr0SJ8MFihpNbx+4Erq7BYBuzsdiH1jCAzoSfl0rVirNbRXlBBlLX+BP0XJLAPGzTkAuAOqb0WT5AH7OcdCm5B8TgRwSRKIHQtaLCwg1RAAAOwAAAAAAAAAAAA==) no-repeat 10px 50%;
            opacity: 0.7;
            z-index: 9999; /*浮动在最上层 */
            -moz-border-radius: 20px;
            -webkit-border-radius: 20px;
            border-radius: 20px;
            filter: progid:DXImageTransform.Microsoft.Alpha(opacity=70);
        }


        text.highcharts-credits {
            display: none;
        }
    </style>

    <script src="../code/highcharts.js"></script>
    <script src="../code/modules/exporting.js"></script>
    <script src="../js/jquery-1.11.2.min.js"></script>

    <title></title>
</head>
<body style="background-color: #fff;">
    <div id="msgdiv" style="display:none;color:red;">网络中断...</div>
    <div style="position:fixed;top:0px;margin:0 auto;font-size:30px;">
        <span id="datetd" style="position:fixed;float:left;left:10px;color:#fff;"></span>
        <span id="timetd" style="position: fixed; float: right; right: 10px; color: #fff;"></span>
    </div>

    <table style="width:100%;padding:0px;height:100%;" align="center">
        <tr>
            <td>
                <div id="dingcan" style="width: 100%; height: 130px;"></div>
            </td>
        </tr>
    </table>
    <div style="display:none;">
        <input type="button" onclick="startchange()" value="start" />
        <input type="button" onclick="stopchange()" value="stop" />
    </div>
</body>
</html>

<script type="text/javascript">






    // 创建渐变色
    Highcharts.getOptions().colors = Highcharts.map(Highcharts.getOptions().colors, function (color) {
        return {
            radialGradient: { cx: 0.5, cy: 0.3, r: 0.7 },
            stops: [
                [0, color],
                [1, Highcharts.Color(color).brighten(-0.3).get('rgb')] // darken
            ]
        };
    });

    var dingcan = Highcharts.chart('dingcan', {
        chart: {
            type: 'column',
            backgroundColor: 'rgba(0,0,0,0)'
        },
        exporting: { enabled: false },
        credits: {
            enabled: false
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            enabled: false
        },
        title: {
            text: ''
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            categories: [
                '张小明', '李四喜', '张三峰', '陈嘉诚'
            ],
            crosshair: true,
            labels: {
                y: 30, //x轴刻度往下移动20px
                style: {
                    //color: '#fff',//颜色
                    fontSize: '18px'  //字体
                }
            }
        },
        yAxis: {
            max: 50, // 定义Y轴 最大值
            min: 0, // 定义最小值
            title: {
                text: ''
            },
            labels: {
                y: 10, //x轴刻度往下移动20px
                style: {
                    //color: '#fff',//颜色
                    fontSize: '18px'  //字体
                }
            }
        },
        tooltip: {
            // head + 每个 point + footer 拼接成完整的 table
            headerFormat: '<table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>{point.y:.1f} 人</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        plotOptions: {
            column: {
                borderWidth: 0,
                pointWidth: 50,
                dataLabels: {
                    enabled: true,
                    color: 'red',
                    shadow: false,
                    style: {
                        fontSize: "20px"
                    },
                    allowOverlap: true // 允许数据标签重叠
                }
            }
        },
        series: [
            {
            name: '个数',
            data: [{ y: 20, color: "#F7A35C" }, { y: 30, color: "green" }, { y: 10, color: "gray" }, { y: 50, color: "red" }]
            } 
        ]
    });
     

</script>
<script type="text/javascript">
    jQuery(document).ready(function () {
        //$(document).ajaxStart(function () {
        //    //  var wait = '<div class="loading" id="waitting">正在努力加载数据...</div>';
        //    $('body').append('<div class="loading" id="waitting">正在努力加载数据...</div>');
        //    $('body').find('#waitting').css('top', $(document).scrollTop() + $(window).height() / 2 - 28 + 'px');
        //    $('body').find('#waitting').css('left', $(document).scrollLeft() + $(window).width() / 2 - 110 + 'px');
        //}).ajaxStop(function () {
        //    $('body').find('#waitting').remove();
        //});


        //loadProJindudata();

    });
    var mytime;
    var MyMar;
    var qccount = 1;
    function change() {
        qucan.series[0].update({
            data: [qccount]
        })
        //qucan.addSeries({ name: '取餐', data: qccount });
        //qucan.series[0].setData(qccount, true, true);
        qccount++;
    }
    function startchange() {
        mytime = setInterval("change()", 100);
    }
    function stopchange() {
        clearInterval(mytime);
    }
    function showloading() {
        $('body').append('<div class="loading" id="waitting">正在努力加载数据...</div>');
        $('body').find('#waitting').css('top', $(document).scrollTop() + $(window).height() / 2 - 28 + 'px');
        $('body').find('#waitting').css('left', $(document).scrollLeft() + $(window).width() / 2 - 110 + 'px');
    }
    function hideloading() {
        $('body').find('#waitting').remove();
    }
    function initloaddata() {

        $.ajax({
            type: "get",
            url: "getdata.aspx",
            dataType: 'json',
            //data: $("form#form1").serialize(),
            timeout: 5000, //超时时间 毫秒
            //                         dataType:'text', //后台返回的数据类型
            beforeSend: function () {
                //showloading();
            },
            success: function (msg) {

            },
            complete: function (XMLHttpRequest, textStatus) {
                if (textStatus == "timeout" || textStatus == "error" || textStatus == "abort") {
                    $("#msgdiv").css("display", "block");
                }
                else {
                    $("#msgdiv").css("display", "none");
                }
                //hideloading();
                data = eval('(' + XMLHttpRequest.responseText + ')');
                //console.log(data.canbie);
                $("#titletd").html(data.canbie);
                var qc = 0
                if (data.getted != undefined) {
                    qc = parseInt(data.getted);
                    qucan.series[0].update({
                        data: [qc]
                    });
                }
                else {
                    qucan.series[0].update({
                        data: [qc]
                    });
                }
                if (data.unget != undefined) {
                    var dc = parseInt(data.unget) + qc
                    dingcan.series[0].update({
                        data: [dc]
                    })
                }
                else {
                    dingcan.series[0].update({
                        data: [0]
                    })
                }
                mytime = setInterval("updatedata()", 1000);
            }
        });
    }

    //loadProJindudata();

    function updatedata() {
        // 当前时间戳
        var myDate = new Date();
        // 年
        var year = myDate.getFullYear();
        // 月
        var month = myDate.getMonth() + 1;
        // 日
        var day = myDate.getDate();
        // 星期
        var week = myDate.getDay();
        // 时
        var hour = myDate.getHours();
        //分
        var minute = myDate.getMinutes();
        //秒
        var second = myDate.getSeconds();
        // 通过索引来确立星期几
        var weekArray = new Array("日", "一", "二", "三", "四", "五", "六");
        // 拼接
        var YearMonthDay = year + "年" + month + "月" + day + "日";
        var weekStr = "星期" + weekArray[week];
        var ShangXia;
        if (hour <= 12)
            ShangXia = "上午";
        else if (hour <= 18)
            ShangXia = "下午";
        else if (hour <= 24)
            ShangXia = "晚上";
        hour = hour.toString().length == 1 ? "0" + hour.toString() : hour.toString();
        minute = minute.toString().length == 1 ? "0" + minute.toString() : minute.toString();
        second = second.toString().length == 1 ? "0" + second.toString() : second.toString();

        var HourMinuteSecond = hour + ":" + minute + ":" + second;

        var zong = YearMonthDay + "  " + weekStr + "  " + HourMinuteSecond;

        $("#timetd").html(HourMinuteSecond);
        $("#datetd").html(YearMonthDay + "  <span style='color:red;'>" + weekStr + "</span>");
        //console.log(YearMonthDay+"---"+HourMinuteSecond)
        $.ajax({
            type: "get",
            url: "getdata.aspx",
            dataType: 'json',
            //data: $("form#form1").serialize(),
            timeout: 10000, //超时时间 毫秒
            //                         dataType:'text', //后台返回的数据类型
            beforeSend: function () {
                //showloading();
            },
            success: function (msg) {

            },
            complete: function (XMLHttpRequest, textStatus) {
                //hideloading();
                data = eval('(' + XMLHttpRequest.responseText + ')');
                $("#titletd").html(data.canbie);
                var qc = 0;
                if (data.getted != undefined) {
                    qc = parseInt(data.getted);
                    qucan.series[0].update({
                        data: [qc]
                    });
                }
                else {
                    qucan.series[0].update({
                        data: [qc]
                    });
                }
                if (data.unget != undefined) {
                    var dc = parseInt(data.unget) + qc
                    dingcan.series[0].update({
                        data: [dc]
                    })
                }
                else {
                    dingcan.series[0].update({
                        data: [0]
                    })
                }
            }
        });
        getkc();
        getmenu();
        getlc();
        ////window.location = window.location;
    }
    function getkc() {
        $.ajax({
            type: "get",
            url: "getkc.aspx",
            dataType: 'json',
            //data: $("form#form1").serialize(),
            timeout: 10000, //超时时间 毫秒
            //                         dataType:'text', //后台返回的数据类型
            beforeSend: function () {
                //showloading();
            },
            success: function (msg) {

            },
            complete: function (XMLHttpRequest, textStatus) {
                //hideloading();
                data = eval('(' + XMLHttpRequest.responseText + ')');
                //$("#titletd").html(data.canbie);
                var qc = 0, dc = 0;
                if (data.getted != undefined) {
                    qc = parseInt(data.getted);
                }
                if (data.unget != undefined) {
                    dc = parseInt(data.unget)
                }
                $("#kcsl").html(qc + dc);
            }
        });
    }
    function getmenu() {
        $.ajax({
            type: "get",
            url: "gettb.aspx",
            dataType: 'json',
            //data: $("form#form1").serialize(),
            timeout: 60000, //超时时间 毫秒
            //                         dataType:'text', //后台返回的数据类型
            beforeSend: function () {
                //showloading();
            },
            success: function (msg) {

            },
            complete: function (XMLHttpRequest, textStatus) {

                $("#demo1").html(XMLHttpRequest.responseText);
                window.clearInterval(MyMar);
                MyMar = setInterval(Marquee, speed);
            }
        });
    }
    function getlc() {
        $.ajax({
            type: "get",
            url: "getlc.aspx",
            dataType: 'json',
            //data: $("form#form1").serialize(),
            timeout: 60000, //超时时间 毫秒
            //                         dataType:'text', //后台返回的数据类型
            beforeSend: function () {
                //showloading();
            },
            success: function (msg) {

            },
            complete: function (XMLHttpRequest, textStatus) {
                data = eval('(' + XMLHttpRequest.responseText + ')');
                //console.log("lclclclclclclc")
                //console.log(data);
                $("#hdemo1").html(data.tab);
                $("#lcrs").html(data.ccount);
                window.clearInterval(MyMar2)
                MyMar2 = setInterval(Marquee2, speed2);
            }
        });
    }
    speed2 = 100; //数字越大滚得越慢
    var htab = document.getElementById("hdemo");
    var htab1 = document.getElementById("hdemo1");
    var htab2 = document.getElementById("hdemo2");
    htab2.innerHTML = htab1.innerHTML;
    htab.scrollTop = htab1.offsetHeight;
    var lastscrollTop2 = 0;
    function Marquee2() {
        if (htab.scrollTop >= htab1.offsetHeight) {
            htab.scrollTop -= htab2.offsetHeight;
        } else {
            htab.scrollTop += 1;
            if (htab.scrollTop == lastscrollTop2) {
                htab.scrollTop = 0;
            }
            lastscrollTop2 = htab.scrollTop;
            console.log(htab.scrollTop + "----" + lastscrollTop2);
        }
    }
    var MyMar2;
    //initloaddata();
    
</script>
<script type="text/javascript">

</script>
